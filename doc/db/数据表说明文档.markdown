# 数据表说明文档

###<font color="blue"> 此说明文档主要说明数据表的功能，具体字段的意义说明可以直接移步数据库进行查看，每个字段上面都有相应的注释；另外第一个功能暂时没考虑流量统计，在线用户数统计等功能，这些功能的数据表暂时没做考虑，这个将作为一个独立的模块在第二次升级的时候添加上去！</font>
----------


----------


##所有表列表：
>
ap_custom  
ap_group  
ap_group_third  
domain_ad  
domain_dev  
potal_img  
potal_instance  
potal_instanse_group  
potal_model  
role
role_menu  
users  
users_mac  
users_phone  
users_temp  
users_third  
users_third_domain  
users_weixin

 


----------

## 分模块:


----------

 **1. 主要涉及五个模块：(暂时未考虑流量，在线用户收集等数据结构)**   

    - ap模块:(ap_*)  
    - 域信息模块（domain_*）
    - 推送页面定制实现模块(potal_*)
    - 用户模块(users_*)
    - 角色定义表(role)


----------

## 2、模块表作用介绍


----------


 ***1、 域信息模块***
>
    > * domain_ad表：
        广告主域信息，最主要的一个字段是domainnumber,
      按照五位数进行区分递归，此字段类似于，00001、00002、0000100001这种    形式；这个字段将决定推送页面的内容是哪个域下面的
     > * domain_dev表：
      设备主域信息，同样的最主要的一个字段是domainNumber字段；这个表主要记录设备分给哪个企业，主要用于管理设备使用
 
 


----------


***2、ap模块***
>

 > *  ap_custom 
        此表主要作用是记录ap信息，包括mac、硬件信息和软件信息，出库日期，分给哪个企业等等，硬件发出之前必须写入此表；
 > *  ap_group
       此表主要作用是记录ap的分组信息，ap分组的主要作用是进行广告推送的时候按组进行区分，一组推送一个广告，只要能进行自由分组就可以自由管理ap推送的广告，、；
 > *  ap_group_third 
        此表的是ap分组和ap信息中间表，将每个ap都所对应的groupid都对应在这里


----------


 ***3. 用户模块***
> * users
     :普通用户表，主要是登录系统的管理员账户或者企业员工账户的用户信息和登录密码等；
> * users_mac 
    :macuser用户表，主要是用作漫游而创建的mac用户，每次推送认证页面之前拿用户终端的mac和已设定的password进行一次认证，如果存在此用户则mac认证通过
> * users_phone 
    :通过电话号码申请登录系统的用户，主要记录用户的电话号码等信息
> * users_temp 
    :临时用户，此用户主要是给没有微信服务号的小店开放，他们可能只有一个微信订阅号，没有开发者权限，但是通过订阅号发送网址的形式能让用户进行上网服务，不失为一种迅速获取微信fans的方式
> * users_third 
    :第三方登陆用户，包括qq,sina等平台的登录用户，后续如果有需要可以加入其他第三方用户，此表只记录用户信息不记录域信息！因为一个账号针对一个第三方平台返回的socialid不管多少次都是一样的，但是这个账号可能需要再不同的域下面进行登录
> * users_third_domain 
    ：第三方登陆账号用户信息和域信息进行一对多对应的中间表；
> * users_weixin
    ：微信平台登陆的账号，此功能主要针对有服务号和开发者权限的组织，因为对于每个微信号每个服务号返回的原始id都不相同，所以域信息可以直接添加在里面
    


----------
***4、potal模块***
<font color="red">此模块的作用是用来做推送的potal页面个性化定制用的，后台开发可以不看</font>
> * potal_img
    保存potal推送页面的图片路径地址，页面容器等
> * potal_instance 
    模板实例表，是将模板进行实例化之后的结果
> * potal_instanse_group 
    实例表和ap_group表进行关联的中间表
> * potal_model 
    模板表，保存模板文件存放的路径和模板说明等模板信息  

----------
***5、角色权限模块***  

 <font color="red">权限模块主要作用：根绝运营目前所定义的运营模式，权限主要涉及平台管理员，设备接入商管理员，广告商管理员，普通登录用户这四个大类，  
	而前三类管理员都有登录管理平台的权限，所以涉及菜单权限的问题，新加一张role_menu表进行角色菜单定义</font>
> * role表主要是对各类角色进行定义，涉及管理员角色拥有哪些权限，非管理员角色拥有账号有效期等
> * role_menu表角色的菜单进行定义，当管理员登陆进入系统，从此菜单读取角色所加载的菜单栏内容